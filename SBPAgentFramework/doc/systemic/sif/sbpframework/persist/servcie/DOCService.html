<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_51) on Tue Nov 14 13:45:54 WST 2017 -->
<title>DOCService</title>
<meta name="date" content="2017-11-14">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="DOCService";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/DOCService.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../systemic/sif/sbpframework/persist/servcie/DBService.html" title="class in systemic.sif.sbpframework.persist.servcie"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../../systemic/sif/sbpframework/persist/servcie/SIFObjectMetadataService.html" title="class in systemic.sif.sbpframework.persist.servcie"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?systemic/sif/sbpframework/persist/servcie/DOCService.html" target="_top">Frames</a></li>
<li><a href="DOCService.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">systemic.sif.sbpframework.persist.servcie</div>
<h2 title="Class DOCService" class="title">Class DOCService</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li><a href="../../../../../systemic/sif/sbpframework/persist/servcie/DBService.html" title="class in systemic.sif.sbpframework.persist.servcie">systemic.sif.sbpframework.persist.servcie.DBService</a></li>
<li>
<ul class="inheritance">
<li>systemic.sif.sbpframework.persist.servcie.DOCService</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="strong">DOCService</span>
extends <a href="../../../../../systemic/sif/sbpframework/persist/servcie/DBService.html" title="class in systemic.sif.sbpframework.persist.servcie">DBService</a></pre>
<dl><dt><span class="strong">Author:</span></dt>
  <dd>Joerg Huber</dd></dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../../../systemic/sif/sbpframework/persist/servcie/DOCService.html#DOCService()">DOCService</a></strong>()</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../systemic/sif/sbpframework/persist/servcie/DOCService.html#cacheObject(systemic.sif.sbpframework.persist.model.DOCache, java.lang.String, java.lang.String, java.lang.String)">cacheObject</a></strong>(<a href="../../../../../systemic/sif/sbpframework/persist/model/DOCache.html" title="class in systemic.sif.sbpframework.persist.model">DOCache</a>&nbsp;sifObjectToCache,
           java.lang.String&nbsp;agentId,
           java.lang.String&nbsp;applicationId,
           java.lang.String&nbsp;zoneId)</code>
<div class="block">This method will save the DOCache object with all its child elements.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../systemic/sif/sbpframework/persist/servcie/DOCService.html#checkAndRemoveDependency(openadk.library.SIFDataObject, java.lang.String, java.lang.String)">checkAndRemoveDependency</a></strong>(openadk.library.SIFDataObject&nbsp;sifObject,
                        java.lang.String&nbsp;applicationId,
                        java.lang.String&nbsp;zoneId)</code>
<div class="block">This method checks if there are any objects cached that depend on this object.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../systemic/sif/sbpframework/persist/servcie/DOCService.html#checkAndRemoveDependency(java.lang.String, java.lang.String, java.lang.String, java.lang.String)">checkAndRemoveDependency</a></strong>(java.lang.String&nbsp;sifObjectName,
                        java.lang.String&nbsp;flatKey,
                        java.lang.String&nbsp;applicationId,
                        java.lang.String&nbsp;zoneId)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>java.util.List&lt;<a href="../../../../../systemic/sif/sbpframework/persist/model/DOCObject.html" title="class in systemic.sif.sbpframework.persist.model">DOCObject</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../systemic/sif/sbpframework/persist/servcie/DOCService.html#extractDependentObjectsFromSIFObject(openadk.library.SIFDataObject)">extractDependentObjectsFromSIFObject</a></strong>(openadk.library.SIFDataObject&nbsp;sifObject)</code>
<div class="block">This method checks SIF Object Cache if the given sifObject has dependencies and if so it will extract all dependencies
 and returns them.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../../../systemic/sif/sbpframework/persist/servcie/DOCService.html#extractFlatKey(openadk.library.SIFDataObject)">extractFlatKey</a></strong>(openadk.library.SIFDataObject&nbsp;sifObject)</code>
<div class="block">This method attempts to extract the primary key from the SIF Object as defined by the SIF Spec and flattens it.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../../../systemic/sif/sbpframework/persist/dao/BaseDAO.html" title="class in systemic.sif.sbpframework.persist.dao">BaseDAO</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../systemic/sif/sbpframework/persist/servcie/DOCService.html#getDAO()">getDAO</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>java.util.List&lt;<a href="../../../../../systemic/sif/sbpframework/persist/model/DOCObject.html" title="class in systemic.sif.sbpframework.persist.model">DOCObject</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../systemic/sif/sbpframework/persist/servcie/DOCService.html#getDependenciesFromSIFObjectAndCache(openadk.library.SIFDataObject, java.lang.String, java.lang.String)">getDependenciesFromSIFObjectAndCache</a></strong>(openadk.library.SIFDataObject&nbsp;sifObject,
                                    java.lang.String&nbsp;applicationId,
                                    java.lang.String&nbsp;zoneId)</code>
<div class="block">This method extracts the dependency info for the given sifObject and then looks up the DOC and marks already
 requested dependent objects for the given zone and application.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>java.util.List&lt;<a href="../../../../../systemic/sif/sbpframework/persist/model/DOCache.html" title="class in systemic.sif.sbpframework.persist.model">DOCache</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../systemic/sif/sbpframework/persist/servcie/DOCService.html#getExpiredObjects(java.lang.String, java.lang.String)">getExpiredObjects</a></strong>(java.lang.String&nbsp;applicationId,
                 java.lang.String&nbsp;agentId)</code>
<div class="block">This method returns all objects in the cache that have remaining dependencies but have an expiry date
 older than the current date and time.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>java.util.List&lt;<a href="../../../../../systemic/sif/sbpframework/persist/model/DOCObject.html" title="class in systemic.sif.sbpframework.persist.model">DOCObject</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../systemic/sif/sbpframework/persist/servcie/DOCService.html#getNotYetRequestedObjects(java.lang.String, java.lang.String, java.lang.String)">getNotYetRequestedObjects</a></strong>(java.lang.String&nbsp;sifObjectName,
                         java.lang.String&nbsp;applicationId,
                         java.lang.String&nbsp;zoneId)</code>
<div class="block">This method returns a list of DOC Objects.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>java.util.List&lt;<a href="../../../../../systemic/sif/sbpframework/persist/model/DOCache.html" title="class in systemic.sif.sbpframework.persist.model">DOCache</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../systemic/sif/sbpframework/persist/servcie/DOCService.html#getObjectsWithoutDependencies(java.lang.String, java.lang.String, java.lang.String)">getObjectsWithoutDependencies</a></strong>(java.lang.String&nbsp;sifObjectName,
                             java.lang.String&nbsp;applicationId,
                             java.lang.String&nbsp;agentId)</code>
<div class="block">This method gets all cached objects of a given type for a particular application and agent that have no 
 remaining dependencies.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../systemic/sif/sbpframework/persist/servcie/DOCService.html#hasPotentialDependencies(java.lang.String)">hasPotentialDependencies</a></strong>(java.lang.String&nbsp;sifObjectName)</code>
<div class="block">This method simply checks if the SIF object given by its name (i.e StudentSchoolEnrolment) has potential
 dependencies based on the metadata that is available on the object.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../systemic/sif/sbpframework/persist/servcie/DOCService.html#markDependentObjectAsRequested(systemic.sif.sbpframework.persist.model.DOCObject, java.lang.String, java.lang.String)">markDependentObjectAsRequested</a></strong>(<a href="../../../../../systemic/sif/sbpframework/persist/model/DOCObject.html" title="class in systemic.sif.sbpframework.persist.model">DOCObject</a>&nbsp;docObject,
                              java.lang.String&nbsp;agentId,
                              java.lang.String&nbsp;zoneId)</code>
<div class="block">This method updates the given docObject and marks it as requested.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../systemic/sif/sbpframework/persist/servcie/DOCService.html#mergeWithCachedDependencies(java.util.List, java.lang.String, java.lang.String)">mergeWithCachedDependencies</a></strong>(java.util.List&lt;<a href="../../../../../systemic/sif/sbpframework/persist/model/DOCObject.html" title="class in systemic.sif.sbpframework.persist.model">DOCObject</a>&gt;&nbsp;dependentObjectList,
                           java.lang.String&nbsp;applicationId,
                           java.lang.String&nbsp;zoneId)</code>
<div class="block">This method iterates through the dependentObjectList and replaces elements in that list with the requested
 information.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../systemic/sif/sbpframework/persist/servcie/DOCService.html#removeCachedObject(systemic.sif.sbpframework.persist.model.DOCache)">removeCachedObject</a></strong>(<a href="../../../../../systemic/sif/sbpframework/persist/model/DOCache.html" title="class in systemic.sif.sbpframework.persist.model">DOCache</a>&nbsp;cacheObject)</code>
<div class="block">This method removes the given object and all its dependencies from the cache.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../../../systemic/sif/sbpframework/persist/model/DOCache.html" title="class in systemic.sif.sbpframework.persist.model">DOCache</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../systemic/sif/sbpframework/persist/servcie/DOCService.html#retrieveCachedObject(openadk.library.SIFDataObject, java.lang.String, java.lang.String, boolean)">retrieveCachedObject</a></strong>(openadk.library.SIFDataObject&nbsp;sifObject,
                    java.lang.String&nbsp;applicationId,
                    java.lang.String&nbsp;zoneId,
                    boolean&nbsp;loadAll)</code>
<div class="block">This method attempts to retrieve a cached SIF Object based on the object name, object key (flatten key) and the
 agentId.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../../../systemic/sif/sbpframework/persist/model/DOCache.html" title="class in systemic.sif.sbpframework.persist.model">DOCache</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../systemic/sif/sbpframework/persist/servcie/DOCService.html#retrieveCachedObject(java.lang.String, java.lang.String, java.lang.String, java.lang.String, boolean)">retrieveCachedObject</a></strong>(java.lang.String&nbsp;sifObjectName,
                    java.lang.String&nbsp;flatKey,
                    java.lang.String&nbsp;applicationId,
                    java.lang.String&nbsp;zoneId,
                    boolean&nbsp;loadAll)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../systemic/sif/sbpframework/persist/servcie/DOCService.html#updateExpiredObjects(java.lang.String, java.lang.String)">updateExpiredObjects</a></strong>(java.lang.String&nbsp;applicationId,
                    java.lang.String&nbsp;agentId)</code>
<div class="block">This method updates all Cached Objects and their dependencies according to the expiry strategy.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_systemic.sif.sbpframework.persist.servcie.DBService">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;systemic.sif.sbpframework.persist.servcie.<a href="../../../../../systemic/sif/sbpframework/persist/servcie/DBService.html" title="class in systemic.sif.sbpframework.persist.servcie">DBService</a></h3>
<code><a href="../../../../../systemic/sif/sbpframework/persist/servcie/DBService.html#loadSubObject(java.lang.Object)">loadSubObject</a>, <a href="../../../../../systemic/sif/sbpframework/persist/servcie/DBService.html#startTransaction()">startTransaction</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>equals, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="DOCService()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>DOCService</h4>
<pre>public&nbsp;DOCService()</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="getDAO()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getDAO</h4>
<pre>public&nbsp;<a href="../../../../../systemic/sif/sbpframework/persist/dao/BaseDAO.html" title="class in systemic.sif.sbpframework.persist.dao">BaseDAO</a>&nbsp;getDAO()</pre>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../systemic/sif/sbpframework/persist/servcie/DBService.html#getDAO()">getDAO</a></code>&nbsp;in class&nbsp;<code><a href="../../../../../systemic/sif/sbpframework/persist/servcie/DBService.html" title="class in systemic.sif.sbpframework.persist.servcie">DBService</a></code></dd>
</dl>
</li>
</ul>
<a name="getDependenciesFromSIFObjectAndCache(openadk.library.SIFDataObject, java.lang.String, java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getDependenciesFromSIFObjectAndCache</h4>
<pre>public&nbsp;java.util.List&lt;<a href="../../../../../systemic/sif/sbpframework/persist/model/DOCObject.html" title="class in systemic.sif.sbpframework.persist.model">DOCObject</a>&gt;&nbsp;getDependenciesFromSIFObjectAndCache(openadk.library.SIFDataObject&nbsp;sifObject,
                                                             java.lang.String&nbsp;applicationId,
                                                             java.lang.String&nbsp;zoneId)
                                                               throws javax.persistence.PersistenceException,
                                                                      java.lang.IllegalArgumentException,
                                                                      <a href="../../../../../systemic/sif/sbpframework/exception/InvalidKeyException.html" title="class in systemic.sif.sbpframework.exception">InvalidKeyException</a></pre>
<div class="block">This method extracts the dependency info for the given sifObject and then looks up the DOC and marks already
 requested dependent objects for the given zone and application. The final list of DOCObject is then returned. If
 there are no dependent objects then an empty list is returned.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>sifObject</code> - The SIF Object from which all dependencies need to be returned.</dd><dd><code>applicationId</code> - Check if dependent objects have already been requested for this application.</dd><dd><code>zoneId</code> - Check if dependent objects have already been requested for this zone.</dd>
<dt><span class="strong">Returns:</span></dt><dd>See description.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>javax.persistence.PersistenceException</code> - If there is an error in the underlying DB. The error is logged.</dd>
<dd><code>java.lang.IllegalArgumentException</code> - If any of the parameters is null or empty.</dd>
<dd><code><a href="../../../../../systemic/sif/sbpframework/exception/InvalidKeyException.html" title="class in systemic.sif.sbpframework.exception">InvalidKeyException</a></code> - Processing of key values in either the object itself or its dependent objects failed. Error is logged.</dd>
<dd><code>java.lang.Exception</code> - some underlying issue. Error is logged.</dd></dl>
</li>
</ul>
<a name="retrieveCachedObject(openadk.library.SIFDataObject, java.lang.String, java.lang.String, boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>retrieveCachedObject</h4>
<pre>public&nbsp;<a href="../../../../../systemic/sif/sbpframework/persist/model/DOCache.html" title="class in systemic.sif.sbpframework.persist.model">DOCache</a>&nbsp;retrieveCachedObject(openadk.library.SIFDataObject&nbsp;sifObject,
                           java.lang.String&nbsp;applicationId,
                           java.lang.String&nbsp;zoneId,
                           boolean&nbsp;loadAll)
                             throws javax.persistence.PersistenceException,
                                    java.lang.IllegalArgumentException</pre>
<div class="block">This method attempts to retrieve a cached SIF Object based on the object name, object key (flatten key) and the
 agentId. Since each object can only be provided from one zone the zoneID is irrelevant and is not required to
 determine if an object is already cached. If the object isn't cached then null is returned.
 
 NOTE:
 ================================================================================================================
 Only the top level object is returned. The dependent object list is not returned as part of this method!!
 If the entire object with its dependent objects shall be returned the loadAll parameter must be set to TRUE
 ================================================================================================================</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>sifObject</code> - The SIF Object for which the DOCache info shall be returned.</dd><dd><code>applicationId</code> - The application ID for which the DOCache info shall be returned.</dd><dd><code>zoneId</code> - The Zone ID for which the DOCache info shall be returned.</dd><dd><code>loadAll</code> - Indicates if all dependent objects shall be loaded into memory. This is required since information
                is 'lazy' loaded by hibernate.</dd>
<dt><span class="strong">Returns:</span></dt><dd>The DOCache object if it exists in the cache already, null if it does not exist.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>javax.persistence.PersistenceException</code> - If there is an error in the underlying DB. The error is logged.</dd>
<dd><code>java.lang.IllegalArgumentException</code> - If any of the parameters is null or empty.</dd>
<dd><code>java.lang.Exception</code> - some underlying issue. Error is logged.</dd></dl>
</li>
</ul>
<a name="retrieveCachedObject(java.lang.String, java.lang.String, java.lang.String, java.lang.String, boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>retrieveCachedObject</h4>
<pre>public&nbsp;<a href="../../../../../systemic/sif/sbpframework/persist/model/DOCache.html" title="class in systemic.sif.sbpframework.persist.model">DOCache</a>&nbsp;retrieveCachedObject(java.lang.String&nbsp;sifObjectName,
                           java.lang.String&nbsp;flatKey,
                           java.lang.String&nbsp;applicationId,
                           java.lang.String&nbsp;zoneId,
                           boolean&nbsp;loadAll)
                             throws javax.persistence.PersistenceException,
                                    java.lang.IllegalArgumentException</pre>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code>javax.persistence.PersistenceException</code></dd>
<dd><code>java.lang.IllegalArgumentException</code></dd></dl>
</li>
</ul>
<a name="cacheObject(systemic.sif.sbpframework.persist.model.DOCache, java.lang.String, java.lang.String, java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>cacheObject</h4>
<pre>public&nbsp;void&nbsp;cacheObject(<a href="../../../../../systemic/sif/sbpframework/persist/model/DOCache.html" title="class in systemic.sif.sbpframework.persist.model">DOCache</a>&nbsp;sifObjectToCache,
               java.lang.String&nbsp;agentId,
               java.lang.String&nbsp;applicationId,
               java.lang.String&nbsp;zoneId)
                 throws javax.persistence.PersistenceException,
                        java.lang.IllegalArgumentException</pre>
<div class="block">This method will save the DOCache object with all its child elements. It will assign appropriate properties such
 as Expire Info (retrieved from the Metadata Cache), received date etc. If the given sifObjectToCache has no 
 dependencies then it will NOT be persisted. A info message is logged in that case as this is not really an error.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>sifObjectToCache</code> - The object to save to the DOC.</dd><dd><code>agentId</code> - The agent that requests this save.</dd><dd><code>applicationId</code> - The application for which the entry is stored. Will be used to pre-populate some information.</dd><dd><code>zoneId</code> - The zone from which the SIF Object has been received. This will be the zone from which dependent objects
               will be requested at some stage.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>javax.persistence.PersistenceException</code> - If the object cannot be persisted. The error is logged.</dd>
<dd><code>java.lang.IllegalArgumentException</code> - If any of the parameters is null or empty. Metadata Cache is not available.</dd></dl>
</li>
</ul>
<a name="markDependentObjectAsRequested(systemic.sif.sbpframework.persist.model.DOCObject, java.lang.String, java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>markDependentObjectAsRequested</h4>
<pre>public&nbsp;void&nbsp;markDependentObjectAsRequested(<a href="../../../../../systemic/sif/sbpframework/persist/model/DOCObject.html" title="class in systemic.sif.sbpframework.persist.model">DOCObject</a>&nbsp;docObject,
                                  java.lang.String&nbsp;agentId,
                                  java.lang.String&nbsp;zoneId)
                                    throws javax.persistence.PersistenceException,
                                           java.lang.IllegalArgumentException</pre>
<div class="block">This method updates the given docObject and marks it as requested. (requested=true, requestDate=now). It is
 assumed that the object does already exist (i.e must have the property id of not null). This method is intended
 to be called once a dependent object has been requested, meaning an appropriate SIFQuery has been issued by an
  agent (agentId) to a zone (zoneId).</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>docObject</code> - The dependent object to update (must have an id of not null!!)</dd><dd><code>agentId</code> - The agent that has requested the object.</dd><dd><code>zoneId</code> - The zone to which the request has been sent.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>javax.persistence.PersistenceException</code> - If the object cannot be persisted. The error is logged.</dd>
<dd><code>java.lang.IllegalArgumentException</code> - If any of the parameters is null or empty. The property docObject.id is null.</dd></dl>
</li>
</ul>
<a name="mergeWithCachedDependencies(java.util.List, java.lang.String, java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>mergeWithCachedDependencies</h4>
<pre>public&nbsp;void&nbsp;mergeWithCachedDependencies(java.util.List&lt;<a href="../../../../../systemic/sif/sbpframework/persist/model/DOCObject.html" title="class in systemic.sif.sbpframework.persist.model">DOCObject</a>&gt;&nbsp;dependentObjectList,
                               java.lang.String&nbsp;applicationId,
                               java.lang.String&nbsp;zoneId)
                                 throws javax.persistence.PersistenceException,
                                        java.lang.IllegalArgumentException</pre>
<div class="block">This method iterates through the dependentObjectList and replaces elements in that list with the requested
 information. This includes if the object has already been requested, when and by which agent. Objects that have not
 been requested are updated with the application ID and Zone Id. If the dependentObjectList is null or empty then
 no action is taken.
 For this method to work the following property in each DOCObject of the dependentObjectList must be populated:
  - objectKeyValue
  - sifObjectName</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>dependentObjectList</code> - The list of objects to test</dd><dd><code>applicationId</code> - The application to test for.</dd><dd><code>zoneId</code> - The zone to test for.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>javax.persistence.PersistenceException</code> - If there are any errors with the underlying data store. Error is logged.</dd>
<dd><code>java.lang.IllegalArgumentException</code> - applicationId or zoneId is empty or null.</dd></dl>
</li>
</ul>
<a name="checkAndRemoveDependency(openadk.library.SIFDataObject, java.lang.String, java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>checkAndRemoveDependency</h4>
<pre>public&nbsp;void&nbsp;checkAndRemoveDependency(openadk.library.SIFDataObject&nbsp;sifObject,
                            java.lang.String&nbsp;applicationId,
                            java.lang.String&nbsp;zoneId)
                              throws java.lang.IllegalArgumentException,
                                     javax.persistence.PersistenceException,
                                     <a href="../../../../../systemic/sif/sbpframework/exception/InvalidKeyException.html" title="class in systemic.sif.sbpframework.exception">InvalidKeyException</a></pre>
<div class="block">This method checks if there are any objects cached that depend on this object. If it finds any objects it will
 remove that dependency from the DOC. If there are no dependencies no action is taken.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>sifObject</code> - The object for which it is checked if there are dependencies.</dd><dd><code>applicationId</code> - The application for which to check.</dd><dd><code>zoneId</code> - The zone this object has been received from.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>javax.persistence.PersistenceException</code> - If there are any errors with the underlying data store. Error is logged.</dd>
<dd><code>java.lang.IllegalArgumentException</code> - sifObject, applicationId or zoneId is empty or null. Metadata Cache is not available.</dd>
<dd><code><a href="../../../../../systemic/sif/sbpframework/exception/InvalidKeyException.html" title="class in systemic.sif.sbpframework.exception">InvalidKeyException</a></code> - The Key of the given object is invalid (null, empty or key element doesn't exist). Error logged.</dd></dl>
</li>
</ul>
<a name="checkAndRemoveDependency(java.lang.String, java.lang.String, java.lang.String, java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>checkAndRemoveDependency</h4>
<pre>public&nbsp;void&nbsp;checkAndRemoveDependency(java.lang.String&nbsp;sifObjectName,
                            java.lang.String&nbsp;flatKey,
                            java.lang.String&nbsp;applicationId,
                            java.lang.String&nbsp;zoneId)
                              throws java.lang.IllegalArgumentException,
                                     javax.persistence.PersistenceException</pre>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code>java.lang.IllegalArgumentException</code></dd>
<dd><code>javax.persistence.PersistenceException</code></dd></dl>
</li>
</ul>
<a name="getNotYetRequestedObjects(java.lang.String, java.lang.String, java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getNotYetRequestedObjects</h4>
<pre>public&nbsp;java.util.List&lt;<a href="../../../../../systemic/sif/sbpframework/persist/model/DOCObject.html" title="class in systemic.sif.sbpframework.persist.model">DOCObject</a>&gt;&nbsp;getNotYetRequestedObjects(java.lang.String&nbsp;sifObjectName,
                                                  java.lang.String&nbsp;applicationId,
                                                  java.lang.String&nbsp;zoneId)
                                                    throws java.lang.IllegalArgumentException,
                                                           javax.persistence.PersistenceException</pre>
<div class="block">This method returns a list of DOC Objects. The objects are those that have not been requested, yet (requested=false).
 The 'keyForDependentObject' of each DOCObject in the list is also populated with the key details of the object.
 Based on this a SIF Query could easily be constructed as all the key information (xpath and value) is available
 after a call to this method.
 
 Note: 
 If an agent subscribes to more than one zone for the same sifObject then this method must be called
 separately for each zone by the agent. If there are no cached and not yet requested objects for the
 given parameters then an empty list is returned.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>sifObjectName</code> - The SIF Object names to search for (i.e StudentPersonal)</dd><dd><code>applicationId</code> - Only return objects marked for this application.</dd><dd><code>zoneId</code> - Only return objects marked for this zone.</dd>
<dt><span class="strong">Returns:</span></dt><dd>See description</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.lang.IllegalArgumentException</code> - docObject is null or any of the properties listed above is empty or null.
                                   Metadata Cache is not available.</dd>
<dd><code>javax.persistence.PersistenceException</code> - A database error occurred.</dd></dl>
</li>
</ul>
<a name="getObjectsWithoutDependencies(java.lang.String, java.lang.String, java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getObjectsWithoutDependencies</h4>
<pre>public&nbsp;java.util.List&lt;<a href="../../../../../systemic/sif/sbpframework/persist/model/DOCache.html" title="class in systemic.sif.sbpframework.persist.model">DOCache</a>&gt;&nbsp;getObjectsWithoutDependencies(java.lang.String&nbsp;sifObjectName,
                                                    java.lang.String&nbsp;applicationId,
                                                    java.lang.String&nbsp;agentId)
                                                      throws java.lang.IllegalArgumentException,
                                                             javax.persistence.PersistenceException</pre>
<div class="block">This method gets all cached objects of a given type for a particular application and agent that have no 
 remaining dependencies. These are the candidates do be removed later and be processed by the appropriate 
 subscriber. If there are no Cached Objects without dependencies then an empty list is returned.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>sifObjectName</code> - The type of cached objects to be returned.</dd><dd><code>applicationId</code> - The application for which the objects shall be returned.</dd><dd><code>agentId</code> - The agent for which to get the object list.</dd>
<dt><span class="strong">Returns:</span></dt><dd>See description.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.lang.IllegalArgumentException</code> - Any of the parameters is null or empty.</dd>
<dd><code>javax.persistence.PersistenceException</code> - A database error occurred. Error is logged.</dd></dl>
</li>
</ul>
<a name="getExpiredObjects(java.lang.String, java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getExpiredObjects</h4>
<pre>public&nbsp;java.util.List&lt;<a href="../../../../../systemic/sif/sbpframework/persist/model/DOCache.html" title="class in systemic.sif.sbpframework.persist.model">DOCache</a>&gt;&nbsp;getExpiredObjects(java.lang.String&nbsp;applicationId,
                                        java.lang.String&nbsp;agentId)
                                          throws java.lang.IllegalArgumentException,
                                                 javax.persistence.PersistenceException</pre>
<div class="block">This method returns all objects in the cache that have remaining dependencies but have an expiry date
 older than the current date and time. These are the candidates that need to either be removed or 
 re-requested by the agent. If there are no expired objects then an empty list is returned.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>applicationId</code> - Only return expired objects for this application.</dd><dd><code>agentId</code> - Only return expired object that were initially cached by this agent.</dd>
<dt><span class="strong">Returns:</span></dt><dd>See description.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.lang.IllegalArgumentException</code> - Any of the parameters is null or empty.</dd>
<dd><code>javax.persistence.PersistenceException</code> - A database error occurred. Error is logged.</dd></dl>
</li>
</ul>
<a name="removeCachedObject(systemic.sif.sbpframework.persist.model.DOCache)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>removeCachedObject</h4>
<pre>public&nbsp;void&nbsp;removeCachedObject(<a href="../../../../../systemic/sif/sbpframework/persist/model/DOCache.html" title="class in systemic.sif.sbpframework.persist.model">DOCache</a>&nbsp;cacheObject)
                        throws javax.persistence.PersistenceException</pre>
<div class="block">This method removes the given object and all its dependencies from the cache. If the object is null then
 no action is taken.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>cacheObject</code> - The object to remove from the DO Cache.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>javax.persistence.PersistenceException</code> - A database error occurred.</dd></dl>
</li>
</ul>
<a name="updateExpiredObjects(java.lang.String, java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>updateExpiredObjects</h4>
<pre>public&nbsp;void&nbsp;updateExpiredObjects(java.lang.String&nbsp;applicationId,
                        java.lang.String&nbsp;agentId)
                          throws java.lang.IllegalArgumentException,
                                 javax.persistence.PersistenceException</pre>
<div class="block">This method updates all Cached Objects and their dependencies according to the expiry strategy. Currently
 there are 2 strategies supported: EXPIRE and REQUEST. In case of EXPIRE the cached object and its 
 dependencies will be removed from the cache and a info message is logged. In case of REQUEST all dependent
 objects for each cached object will be marked as not requested (requested=false), so that it can be 
 requested again by the appropriate subscribers. The Cached Object will update its expiry date accordingly.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>applicationId</code> - Only update/remove expired objects for this application.</dd><dd><code>agentId</code> - Only update/remove expired object that were initially cached by this agent.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.lang.IllegalArgumentException</code> - Any of the parameters is null or empty.</dd>
<dd><code>javax.persistence.PersistenceException</code> - A database error occurred. Error is logged.</dd></dl>
</li>
</ul>
<a name="hasPotentialDependencies(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>hasPotentialDependencies</h4>
<pre>public&nbsp;boolean&nbsp;hasPotentialDependencies(java.lang.String&nbsp;sifObjectName)</pre>
<div class="block">This method simply checks if the SIF object given by its name (i.e StudentSchoolEnrolment) has potential
 dependencies based on the metadata that is available on the object. TRUE is returned if the object has
 dependencies defined in the metadata cache. False is returned if there are no known dependencies based
 on the metadata cache (i.e StudentPersonal has no dependencies where as the StudentSchoolEnrollment has the
 student and school as dependencies.). If the sifObjectName is null or not known in the metadata cache then
 FALSE is returned, indicating no caching required.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>sifObjectName</code> - The name of the SIF Object to test for.</dd>
<dt><span class="strong">Returns:</span></dt><dd>See description.</dd></dl>
</li>
</ul>
<a name="extractFlatKey(openadk.library.SIFDataObject)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>extractFlatKey</h4>
<pre>public&nbsp;java.lang.String&nbsp;extractFlatKey(openadk.library.SIFDataObject&nbsp;sifObject)
                                throws java.lang.IllegalArgumentException,
                                       <a href="../../../../../systemic/sif/sbpframework/exception/InvalidKeyException.html" title="class in systemic.sif.sbpframework.exception">InvalidKeyException</a></pre>
<div class="block">This method attempts to extract the primary key from the SIF Object as defined by the SIF Spec and flattens it.
 If the key is made up of more than one component the various components are separated by a separator as defined
 in the Metadata cache (generally a '|' character). The order of the key components is the same as the order of the
 key definition in the SIF Spec.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>sifObject</code> - From which the primary key shall be extracted and flattened.</dd>
<dt><span class="strong">Returns:</span></dt><dd>The flattened key of the SIFObject as described above.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.lang.IllegalArgumentException</code> - Object is null or doesn't contain the primary key as expected by the SIF Spec.</dd>
<dd><code><a href="../../../../../systemic/sif/sbpframework/exception/InvalidKeyException.html" title="class in systemic.sif.sbpframework.exception">InvalidKeyException</a></code> - The primary key of the object is not set or accessible (i.e. value is null or empty).</dd></dl>
</li>
</ul>
<a name="extractDependentObjectsFromSIFObject(openadk.library.SIFDataObject)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>extractDependentObjectsFromSIFObject</h4>
<pre>public&nbsp;java.util.List&lt;<a href="../../../../../systemic/sif/sbpframework/persist/model/DOCObject.html" title="class in systemic.sif.sbpframework.persist.model">DOCObject</a>&gt;&nbsp;extractDependentObjectsFromSIFObject(openadk.library.SIFDataObject&nbsp;sifObject)
                                                               throws javax.persistence.PersistenceException,
                                                                      java.lang.IllegalArgumentException,
                                                                      <a href="../../../../../systemic/sif/sbpframework/exception/InvalidKeyException.html" title="class in systemic.sif.sbpframework.exception">InvalidKeyException</a></pre>
<div class="block">This method checks SIF Object Cache if the given sifObject has dependencies and if so it will extract all dependencies
 and returns them. Each dependency is taken from the sifObject content by means of looking up the SIF Object cache and
 its object metadata information.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code>javax.persistence.PersistenceException</code> - If there are any errors with the underlying data store. Error is logged.</dd>
<dd><code>java.lang.IllegalArgumentException</code> - Metadata Cache is not available. Error is logged.</dd>
<dd><code><a href="../../../../../systemic/sif/sbpframework/exception/InvalidKeyException.html" title="class in systemic.sif.sbpframework.exception">InvalidKeyException</a></code></dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/DOCService.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../systemic/sif/sbpframework/persist/servcie/DBService.html" title="class in systemic.sif.sbpframework.persist.servcie"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../../systemic/sif/sbpframework/persist/servcie/SIFObjectMetadataService.html" title="class in systemic.sif.sbpframework.persist.servcie"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?systemic/sif/sbpframework/persist/servcie/DOCService.html" target="_top">Frames</a></li>
<li><a href="DOCService.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
